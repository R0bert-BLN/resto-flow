restoflow.lvh.me, *.restoflow.lvh.me {
    tls internal
    encode gzip

    handle /api/* {
        reverse_proxy backend:80 {
            header_up X-Forwarded-Proto {scheme}
            header_up X-Forwarded-Host {host}
        }
    }

    handle /sanctum/* {
        reverse_proxy backend:80 {
            header_up X-Forwarded-Proto {scheme}
            header_up X-Forwarded-Host {host}
        }
    }

    handle /* {
        reverse_proxy frontend:5173
    }
}

minio.lvh.me {
    tls internal
    reverse_proxy minio:9001
}

mailpit.lvh.me {
    tls internal
    reverse_proxy mailpit:8025
}

mercure.lvh.me {
    tls internal
    reverse_proxy mercure:80 {
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
    }
}

openobserve.lvh.me {
    tls internal
    reverse_proxy openobserve:5080
}
